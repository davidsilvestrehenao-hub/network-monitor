---
description: Database Schema - Network Monitor Domain
globs: "prisma/**/*.prisma, src/**/*.ts, src/**/*.tsx"
alwaysApply: true
type: Auto Attached
---

# Database Schema - Network Monitor Domain

This file contains the database schema documentation for the Network Monitor application. For the complete schema details, see the detailed domain schema file.

## üóÑÔ∏è **Quick Reference**

- **Database**: Prisma ORM with SQLite (dev) / PostgreSQL (prod)
- **Key Entities**: User, MonitoringTarget, SpeedTestResult, AlertRule, IncidentEvent
- **Relationships**: User owns targets, targets have results and rules
- **Schema Location**: `packages/database/prisma/schema.prisma`

## üìÅ **Detailed Schema**

For complete database schema documentation, see:
- **Domain Schema**: `.cursor/rules/network-monitor/70-database-schema.mdc`

## üîÑ **Template Extraction**

When extracting this project as a template:
1. Replace this file with `.cursor/rules/template/70-database-schema.mdc`
2. Update the domain-specific schema in `network-monitor/` directory
3. Follow the template migration guide in `docs/TEMPLATE-MIGRATION-GUIDE.md`

## üéØ **Current Domain Schema**

This project uses a **network monitoring** database schema with:

- **MonitoringTarget**: Internet endpoints to monitor
- **SpeedTestResult**: Performance measurements (ping, download)
- **AlertRule**: Threshold-based alerting configuration
- **IncidentEvent**: Alert and outage tracking
- **PushSubscription**: Web push notification subscriptions
- **Notification**: In-app notification messages

## üìã **Key Patterns**

- **Repository Pattern**: All database access through repositories
- **Domain Mapping**: Prisma models mapped to domain types
- **Type Safety**: Full TypeScript type safety
- **Cascade Deletes**: Proper cleanup of related data

Remember: **This is the current domain schema. For template extraction, see the template files.**
